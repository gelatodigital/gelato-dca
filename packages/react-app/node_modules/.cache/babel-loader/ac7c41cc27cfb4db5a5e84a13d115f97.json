{"ast":null,"code":"import { ethers } from \"ethers\";\nimport { getGelatoKrystal } from \"./stateReads\";\nimport { addresses } from \"@gelato-krystal/contracts\";\nconst {\n  GELATO_KRYSTAL\n} = addresses;\nexport const submitOrder = async (user, inToken, outToken, delay, amountPerTrade, nTrades, minSlippage = 9001, maxSlippage = 9000, gasPriceCeil = 0) => {\n  const gelatoKrystal = await getGelatoKrystal(user);\n  const options = {\n    gasPrice: ethers.utils.parseUnits(\"50\", \"gwei\")\n  };\n\n  try {\n    const submitTx = await gelatoKrystal.submitDCAKyber({\n      _inToken: inToken,\n      _outToken: outToken,\n      _amountPerTrade: amountPerTrade,\n      _nTrades: nTrades,\n      _minSlippage: minSlippage,\n      _maxSlippage: maxSlippage,\n      _delay: delay,\n      _gasPriceCeil: gasPriceCeil\n    }, options);\n    await submitTx.wait();\n  } catch (err) {\n    console.log(err);\n  }\n};\nexport const approveToken = async (user, inToken, totalAmount) => {\n  const signer = await user.getSigner();\n  const token = new ethers.Contract(inToken, [\"function approve(address _spender, uint256 _amount)\"], signer);\n  const options = {\n    gasPrice: ethers.utils.parseUnits(\"50\", \"gwei\")\n  };\n\n  try {\n    const approve = await token.approve(GELATO_KRYSTAL, totalAmount, options);\n    await approve.wait();\n  } catch (err) {\n    console.log(err);\n  }\n};","map":{"version":3,"sources":["/Users/Hilmar/code/integrations/krystal/gelato-krystal/packages/react-app/src/services/stateWrites.js"],"names":["ethers","getGelatoKrystal","addresses","GELATO_KRYSTAL","submitOrder","user","inToken","outToken","delay","amountPerTrade","nTrades","minSlippage","maxSlippage","gasPriceCeil","gelatoKrystal","options","gasPrice","utils","parseUnits","submitTx","submitDCAKyber","_inToken","_outToken","_amountPerTrade","_nTrades","_minSlippage","_maxSlippage","_delay","_gasPriceCeil","wait","err","console","log","approveToken","totalAmount","signer","getSigner","token","Contract","approve"],"mappings":"AAAA,SAASA,MAAT,QAAuB,QAAvB;AACA,SAASC,gBAAT,QAAiC,cAAjC;AACA,SAASC,SAAT,QAA0B,2BAA1B;AAEA,MAAM;AAAEC,EAAAA;AAAF,IAAqBD,SAA3B;AAEA,OAAO,MAAME,WAAW,GAAG,OACzBC,IADyB,EAEzBC,OAFyB,EAGzBC,QAHyB,EAIzBC,KAJyB,EAKzBC,cALyB,EAMzBC,OANyB,EAOzBC,WAAW,GAAG,IAPW,EAQzBC,WAAW,GAAG,IARW,EASzBC,YAAY,GAAG,CATU,KAUtB;AACH,QAAMC,aAAa,GAAG,MAAMb,gBAAgB,CAACI,IAAD,CAA5C;AAEA,QAAMU,OAAO,GAAG;AACdC,IAAAA,QAAQ,EAAEhB,MAAM,CAACiB,KAAP,CAAaC,UAAb,CAAwB,IAAxB,EAA8B,MAA9B;AADI,GAAhB;;AAIA,MAAI;AACF,UAAMC,QAAQ,GAAG,MAAML,aAAa,CAACM,cAAd,CACrB;AACEC,MAAAA,QAAQ,EAAEf,OADZ;AAEEgB,MAAAA,SAAS,EAAEf,QAFb;AAGEgB,MAAAA,eAAe,EAAEd,cAHnB;AAIEe,MAAAA,QAAQ,EAAEd,OAJZ;AAKEe,MAAAA,YAAY,EAAEd,WALhB;AAMEe,MAAAA,YAAY,EAAEd,WANhB;AAOEe,MAAAA,MAAM,EAAEnB,KAPV;AAQEoB,MAAAA,aAAa,EAAEf;AARjB,KADqB,EAWrBE,OAXqB,CAAvB;AAaA,UAAMI,QAAQ,CAACU,IAAT,EAAN;AACD,GAfD,CAeE,OAAOC,GAAP,EAAY;AACZC,IAAAA,OAAO,CAACC,GAAR,CAAYF,GAAZ;AACD;AACF,CAnCM;AAqCP,OAAO,MAAMG,YAAY,GAAG,OAAO5B,IAAP,EAAaC,OAAb,EAAsB4B,WAAtB,KAAsC;AAChE,QAAMC,MAAM,GAAG,MAAM9B,IAAI,CAAC+B,SAAL,EAArB;AACA,QAAMC,KAAK,GAAG,IAAIrC,MAAM,CAACsC,QAAX,CACZhC,OADY,EAEZ,CAAC,qDAAD,CAFY,EAGZ6B,MAHY,CAAd;AAMA,QAAMpB,OAAO,GAAG;AACdC,IAAAA,QAAQ,EAAEhB,MAAM,CAACiB,KAAP,CAAaC,UAAb,CAAwB,IAAxB,EAA8B,MAA9B;AADI,GAAhB;;AAIA,MAAI;AACF,UAAMqB,OAAO,GAAG,MAAMF,KAAK,CAACE,OAAN,CAAcpC,cAAd,EAA8B+B,WAA9B,EAA2CnB,OAA3C,CAAtB;AACA,UAAMwB,OAAO,CAACV,IAAR,EAAN;AACD,GAHD,CAGE,OAAOC,GAAP,EAAY;AACZC,IAAAA,OAAO,CAACC,GAAR,CAAYF,GAAZ;AACD;AACF,CAlBM","sourcesContent":["import { ethers } from \"ethers\";\nimport { getGelatoKrystal } from \"./stateReads\";\nimport { addresses } from \"@gelato-krystal/contracts\";\n\nconst { GELATO_KRYSTAL } = addresses;\n\nexport const submitOrder = async (\n  user,\n  inToken,\n  outToken,\n  delay,\n  amountPerTrade,\n  nTrades,\n  minSlippage = 9001,\n  maxSlippage = 9000,\n  gasPriceCeil = 0\n) => {\n  const gelatoKrystal = await getGelatoKrystal(user);\n\n  const options = {\n    gasPrice: ethers.utils.parseUnits(\"50\", \"gwei\"),\n  };\n\n  try {\n    const submitTx = await gelatoKrystal.submitDCAKyber(\n      {\n        _inToken: inToken,\n        _outToken: outToken,\n        _amountPerTrade: amountPerTrade,\n        _nTrades: nTrades,\n        _minSlippage: minSlippage,\n        _maxSlippage: maxSlippage,\n        _delay: delay,\n        _gasPriceCeil: gasPriceCeil,\n      },\n      options\n    );\n    await submitTx.wait();\n  } catch (err) {\n    console.log(err);\n  }\n};\n\nexport const approveToken = async (user, inToken, totalAmount) => {\n  const signer = await user.getSigner();\n  const token = new ethers.Contract(\n    inToken,\n    [\"function approve(address _spender, uint256 _amount)\"],\n    signer\n  );\n\n  const options = {\n    gasPrice: ethers.utils.parseUnits(\"50\", \"gwei\"),\n  };\n\n  try {\n    const approve = await token.approve(GELATO_KRYSTAL, totalAmount, options);\n    await approve.wait();\n  } catch (err) {\n    console.log(err);\n  }\n};\n"]},"metadata":{},"sourceType":"module"}